Feature: パスワード生成機能
  指定された長さで、大文字・小文字・数字・記号を含むセキュアなパスワードを生成する

  Background:
    Given パスワード生成機能が利用可能である

  # ===========================================
  # 正常系シナリオ
  # ===========================================

  Scenario: 最小長4文字のパスワードを生成する
    When 長さ 4 のパスワードを生成する
    Then 生成されたパスワードの長さは 4 である
    And パスワードに大文字が含まれる
    And パスワードに小文字が含まれる
    And パスワードに数字が含まれる
    And パスワードに記号が含まれる

  Scenario: 最大長100文字のパスワードを生成する
    When 長さ 100 のパスワードを生成する
    Then 生成されたパスワードの長さは 100 である
    And パスワードに大文字が含まれる
    And パスワードに小文字が含まれる
    And パスワードに数字が含まれる
    And パスワードに記号が含まれる

  Scenario: 生成されたパスワードはユニークである
    When 長さ 12 のパスワードを2回生成する
    Then 2つのパスワードは異なる

  # ===========================================
  # 異常系シナリオ
  # ===========================================

  Scenario: 3文字以下のパスワード生成でエラーが発生する
    When 長さ 3 のパスワードを生成する
    Then エラー "4種類の文字を含めるには最低4文字必要です" が発生する

  Scenario: 負の長さのパスワード生成でエラーが発生する
    When 長さ -1 のパスワードを生成する
    Then エラー "4種類の文字を含めるには最低4文字必要です" が発生する

  Scenario: 101文字のパスワード生成でエラーが発生する
    When 長さ 101 のパスワードを生成する
    Then エラー "パスワードの長さは4〜100である必要があります" が発生する

  Scenario: 文字列での長さ指定でエラーが発生する
    When 長さ "twelve" のパスワードを生成する
    Then エラー "長さは整数である必要があります" が発生する

  Scenario: nullでの長さ指定でエラーが発生する
    When 長さ null のパスワードを生成する
    Then エラー "長さがnullです" が発生する